<!DOCTYPE html>
<html lang="en"><head><title>Hatena2012-04-05</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="🪴 Quartz 4.0"/><meta property="og:title" content="Hatena2012-04-05"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Hatena2012-04-05"/><meta name="twitter:description" content="hatena &lt;body> *1333593776*Alloy: I don't know what all means. I'm not sure what you mean by ALL in Alloy. >|| enum X {A, B, C} check { all r: X{ one r } } ||&lt; I cannot find a counterexample for this."/><meta property="og:description" content="hatena &lt;body> *1333593776*Alloy: I don't know what all means. I'm not sure what you mean by ALL in Alloy. >|| enum X {A, B, C} check { all r: X{ one r } } ||&lt; I cannot find a counterexample for this."/><meta property="og:image:type" content="image/webp"/><meta property="og:image:alt" content="hatena &lt;body> *1333593776*Alloy: I don't know what all means. I'm not sure what you mean by ALL in Alloy. >|| enum X {A, B, C} check { all r: X{ one r } } ||&lt; I cannot find a counterexample for this."/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:width" content="1200"/><meta property="og:height" content="630"/><meta property="og:image:url" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta name="twitter:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="og:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="twitter:domain" content="quartz.jzhao.xyz"/><meta property="og:url" content="https:/quartz.jzhao.xyz/Hatena2012-04-05"/><meta property="twitter:url" content="https:/quartz.jzhao.xyz/Hatena2012-04-05"/><link rel="icon" href="./static/icon.png"/><meta name="description" content="hatena &lt;body> *1333593776*Alloy: I don't know what all means. I'm not sure what you mean by ALL in Alloy. >|| enum X {A, B, C} check { all r: X{ one r } } ||&lt; I cannot find a counterexample for this."/><meta name="generator" content="Quartz"/><link href="./index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><script src="./prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("./static/contentIndex.json").then(data => data.json())</script></head><body data-slug="Hatena2012-04-05"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href=".">🪴 Quartz 4.0</a></h2><div class="spacer mobile-only"></div><div class="search"><button class="search-button" id="search-button"><p>Search</p><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></button><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="search-layout" data-preview="true"></div></div></div></div><button class="darkmode" id="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="./">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>Hatena2012-04-05</a></div></nav><h1 class="article-title">Hatena2012-04-05</h1><p show-comma="true" class="content-meta"><span>Apr 05, 2012</span><span>6 min read</span></p></div></div><article class="popover-hint"><p>hatena</p>
<pre><code>&lt;body>
*1333593776*Alloy: I don't know what all means.
I'm not sure what you mean by ALL in Alloy.
>||
enum X {A, B, C}
check {
  all r: X{
    one r
  }
}
||&lt;
I cannot find a counterexample for this. So &quot;all r: X {foo}&quot; means &quot;foo holds for all &lt;span class=&quot;deco&quot; style=&quot;font-weight:bold;&quot;>elements&lt;/span> of the set X&quot;.

However, if we replace this X with X -> X, the behavior is different.

>||
enum X {A, B, C}
check {
  all r: X -> X{
    one r
  }
}
||&lt;

You can find many counterexamples to this. In other words, &quot;all r: X -> X {foo}&quot; means &quot;foo holds for &lt;span class=&quot;deco&quot; style=&quot;font-weight:bold;&quot;>subset&lt;/span> of all 'sets of maps from X to X'&quot;.
At first I thought X -> X was a set of sets, but that's not the case, it's just a set containing a relation (a tuple of two elements). So the behavior of ALL changes depending on whether the set contains a relation or just a value?

** Postscript
If the target of all is a scalar set, it is possible to have the same behavior as the mathematical symbol for all (by generating a sequence of and's), but if it is not a scalar set, it is not done because doing so might result in too many clauses.

*1333628554*A story about trying to do combinatorial logic in Alloy and it didn't work.
I wanted to let Alloy solve some appropriate puzzle, and the first thing that came to mind was &quot;Make I with the combination of S and K&quot;, so I implemented it, but before I could find I, I couldn't find a solution that satisfied fact even without any constraints. Why?
>||
abstract sig Bird{
	apply: Bird -> Bird
}

one sig K extends Bird{}

one sig S extends Bird{}

fact {
	all x, y: Bird | K.apply.x.apply.y = x
	all x, y, z: Bird {
		S.apply.x.apply.y.apply.z =
		x.apply.z.apply.(y.apply.z)
	}
}

run {} for 10 Bird
||&lt;

I think what's likely is &quot;if the set of birds is finite, there is no solution&quot;. Hmmm. Will there be enough birds to remember the state of each of the partially applied S combinators' previous arguments?

*1333636035*Alloy Diary 2: Changing states over time
I was going to make a model in which there are multiple people interacting with each other while their states change chronologically (specifically, I was going to make a model in which a man and a woman get married and divorced while their married/unmarried states change, and at first there were not enough constraints so a bigamy occurred, and I was going to correct it). But it was too difficult to handle the state of the marriage, so I gave up on the idea yesterday.

I copied the chapter 6 case study today while waiting for a haircut and on the train home. I kind of got it figured out, so I'll try to implement it. But there's only one person because it still seems confusing when there's more than one person in the room. And that person has three states. From green, he can transition to green and yellow, yellow can immediately transition to red, and red can transition to green and red.

>||
open util/ordering[Time]

sig Time {}
one sig Person {
	state: State -> Time
}

enum State {Green, Yellow, Red}

pred step (t, t' : Time, s: State){
	Person.state.t in Green => Person.state.t' in Green + Yellow
	Person.state.t in Yellow => Person.state.t' in Red
	Person.state.t in Red => Person.state.t' in Green + Red
}

fact {
	all t: Time { // only one state exists at each time point
		one Person.state.t
	}
}

fact Traces {
	all t: Time - last {
		let t' = t.next {
			all s: State {
				step [t, t', s]
			}
		}
	}
}

run {
	all s: State { // exists once for every state
		some s &lt;: Person.state
	}
} for 5 Time
||&lt;

Without the &quot;exists at least once for every state&quot; option, I got something that started out red and stayed red, which was no fun. When I fixed it, I got yellow -> red -> red -> red -> green. I'm happy and satisfied. It's getting fun.
&lt;/body>
&lt;comments>
&lt;comment>
&lt;username>osiire&lt;/username>
&lt;body>I don't know the details either, but the following reference, 265p. (and the page numbered in the upper right corner), has a relevant description. &lt;br>http://alloy.mit.edu/alloy/documentation/book-chapters/alloy-language-reference.pdf&lt;br>&lt;br>---Quotes---&lt;br>Thus, when X is a set, the quantified constraint&lt;br> all x: X | F&lt;br>has x range over scalar values: that is, the constraint F is evaluated for &lt;br>bindings of x to singleton subsets of X.&lt;br>---quote---&lt;br>It says that x moves scalar (singleton) range if X is a set. From this, the first example seems fine. &lt;br>From the next section, it says that in the case of higher-order constraints, we should drop down to the first floor and solve the problem if we can scolemize it. &lt;BR>So I think there will be a counterexample to one r, because the r in all r:X->X will be any of the subsets (not necessarily singletons) of X->X. &lt;BR>&lt;BR>There seems to be a statement near the middle of page 17 of the ↓ paper you referenced earlier. &lt;br>http://sdg.csail.mit.edu/pubs/2002/alloy-journal.pdf&lt;br>---Quotes---&lt;br>All quantifiers are first order. The analysis eliminates scalar The analysis eliminates scalar quantifiers by forming explicit conjunctions and disjunctions over all possible values of the bound variable. The analysis eliminates scalar quantifiers by forming explicit conjunctions and disjunctions over all possible values of the bound variable. &lt;br>Skolemization can eliminate some higher-order quantifiers, but Alloy's design is based on the &lt;br>premise that all specifications should be analyzable.&lt;br>--- Citation ---&lt;br>For your information. &lt;/body>
&lt;timestamp>1333635575&lt;/timestamp>
&lt;/comment>
&lt;comment>
&lt;username>nishiohirokazu&lt;/username>
&lt;body>Thanks! I'm not quite sure about the Scoremization, but I see that when you use quantifiers for a set of scalars, the process of creating a Boolean expression to pass to SAT is a mass of and's and or's. It makes sense that it would be hard to do the same thing for a set of relations, because you need N^2 of them. If I think about it in my procedural language brain, licking a subset would be 2^N, which seems huge, but I'm sure it's more convenient from the SAT perspective. &lt;/body>
&lt;timestamp>1333637755&lt;/timestamp>
&lt;/comment>
&lt;/comments>
</code></pre>
<h2 id="hatena-diary-2012-04-05"><a href="https://nishiohirokazu.hatenadiary.org/archive/2012/04/05" class="external">Hatena Diary 2012-04-05<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#hatena-diary-2012-04-05" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>This page is auto-translated from <a href="https://scrapbox.io/nishio/Hatena2012-04-05" class="external">/nishio/Hatena2012-04-05<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> using DeepL. If you looks something interesting but the auto-translated English is not good enough to understand it, feel free to let me know at <a href="https://twitter.com/nishio_en" class="external">@nishio_en<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>. I’m very happy to spread my thought to non-Japanese readers.</p></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false}"></div><button id="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true}"></div></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.4.0</a> © 2024</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript">function c(){let t=this.parentElement;t.classList.toggle("is-collapsed");let l=t.classList.contains("is-collapsed")?this.scrollHeight:t.scrollHeight;t.style.maxHeight=l+"px";let o=t,e=t.parentElement;for(;e;){if(!e.classList.contains("callout"))return;let n=e.classList.contains("is-collapsed")?e.scrollHeight:e.scrollHeight+o.scrollHeight;e.style.maxHeight=n+"px",o=e,e=e.parentElement}}function i(){let t=document.getElementsByClassName("callout is-collapsible");for(let s of t){let l=s.firstElementChild;if(l){l.addEventListener("click",c),window.addCleanup(()=>l.removeEventListener("click",c));let e=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=e+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script src="./postscript.js" type="module"></script></html>