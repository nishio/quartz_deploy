<!DOCTYPE html>
<html lang="en"><head><title>Kozaneba Development Diary 2021-08-16</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="🪴 Quartz 4.0"/><meta property="og:title" content="Kozaneba Development Diary 2021-08-16"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Kozaneba Development Diary 2021-08-16"/><meta name="twitter:description" content="prev Kozaneba Development Diary 2021-08-13 It was an image of extensibility by users, adding menus and processing with JS, but suddenly there was a bad idea of “turning and gaming ..."/><meta property="og:description" content="prev Kozaneba Development Diary 2021-08-13 It was an image of extensibility by users, adding menus and processing with JS, but suddenly there was a bad idea of “turning and gaming ..."/><meta property="og:image:type" content="image/webp"/><meta property="og:image:alt" content="prev Kozaneba Development Diary 2021-08-13 It was an image of extensibility by users, adding menus and processing with JS, but suddenly there was a bad idea of “turning and gaming ..."/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:width" content="1200"/><meta property="og:height" content="630"/><meta property="og:image:url" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta name="twitter:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="og:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="twitter:domain" content="quartz.jzhao.xyz"/><meta property="og:url" content="https:/quartz.jzhao.xyz/Kozaneba-Development-Diary-2021-08-16"/><meta property="twitter:url" content="https:/quartz.jzhao.xyz/Kozaneba-Development-Diary-2021-08-16"/><link rel="icon" href="./static/icon.png"/><meta name="description" content="prev Kozaneba Development Diary 2021-08-13 It was an image of extensibility by users, adding menus and processing with JS, but suddenly there was a bad idea of “turning and gaming ..."/><meta name="generator" content="Quartz"/><link href="./index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><script src="./prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("./static/contentIndex.json").then(data => data.json())</script></head><body data-slug="Kozaneba-Development-Diary-2021-08-16"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href=".">🪴 Quartz 4.0</a></h2><div class="spacer mobile-only"></div><div class="search"><button class="search-button" id="search-button"><p>Search</p><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></button><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="search-layout" data-preview="true"></div></div></div></div><button class="darkmode" id="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="./">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>Kozaneba Development Diary 2021-08-16</a></div></nav><h1 class="article-title">Kozaneba Development Diary 2021-08-16</h1><p show-comma="true" class="content-meta"><span>Jan 25, 2022</span><span>6 min read</span></p></div></div><article class="popover-hint"><p>prev  <a href="./Kozaneba-Development-Diary-2021-08-13" class="internal alias" data-slug="Kozaneba-Development-Diary-2021-08-13">Kozaneba Development Diary 2021-08-13</a></p>
<p><img src="https://gyazo.com/cf5f4a0ebd27070f46659d3857c64886/thumb/1000" alt="image"/></p>
<hr/>
<p>It was an image of extensibility by users, adding menus and processing with JS, but suddenly there was a bad idea of “turning and gaming background”.</p>
<p>I tried hard-coding it anyway.</p>
<ul>
<li><img src="https://gyazo.com/501f49913b0c02e482dac0c6276c3c74/thumb/1000" alt="image"/></li>
<li>I found out that we need a mechanism to allow users to specify @keyframe, it’s annoying.</li>
<li><a href="https://stackoverflow.com/questions/51338631/react-how-to-specify-animation-keyframes-and-classes-locally/51340161" class="external">reactjs - React how to specify animation @keyframes and classes locally - Stack Overflow<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li><img src="https://gyazo.com/cf5f4a0ebd27070f46659d3857c64886/thumb/1000" alt="image"/>
<ul>
<li><a href="https://stackoverflow.com/questions/26986129/play-multiple-css-animations-at-the-same-time" class="external">Play multiple CSS animations at the same time - Stack Overflow<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>
</li>
</ul>
<p>If the user changes the style</p>
<ul>
<li>Change the default style</li>
<li>Change the style of a particular kozane or group
There are two possible ways to
If the object’s style attribute is undefined, use the default one, or if it is a string, look for it in the style list by its name?
I want a guard to ensure that the object entered by the user has the proper structure.</li>
<li>Specifically, React.CSSProperties</li>
</ul>
<p>It’s going to cause users to fail and make errors.</p>
<ul>
<li>The current design doesn’t give a detailed error message, it just registers on Sentry, but that’s not right.</li>
<li>Error messages should be communicated to the user during trial and error, and that shouldn’t go into Sentry.</li>
<li>On the other hand, you can’t distinguish when a user script creates an inconsistent condition that results in an error after the fact.</li>
</ul>
<hr/>
<blockquote>
<p>Future Flow
User testing is at a slow pace as my capacity is overflowing.
First, implement the functionality you need for your own use, and then cover it with proper automated tests before including it in the tutorial.
After all that is done, we will make the tutorial multilingual and create a user forum.
Long-term goal is scalability by users</p>
</blockquote>
<blockquote>
<p>I’m a little slammed with deadlines, so next week I’ll sit back, clean up the code, cover it with tests, and add explanations to the tutorials.
There is no tutorial on how to view saved pages.
Not good because the added stickies are placed at the origin in world coordinates.
Important: I still don’t think it’s a good idea to go the route of using the drag-drop API (the look and feel is very environment-dependent).
The test itself has been created by trial and error and patchwork, so it’s chaotic.
I want to make a user page.
Need a list of places used in the past
Placement of future expansion, etc.
I’d like to make a “of course you can use Scrapbox cards as small bills because they’re DOM” video as a catchy teaser at the right time.</p>
</blockquote>
<p>The reason there is no tutorial on how to view a saved place is because there is no UI for that in the first place.</p>
<p>Clean up the test</p>
<ul>
<li>It’s in integrations/movidea now.</li>
<li>Why not just put the cleaned ones in kozaneba?</li>
</ul>
<p>The tutorial was not initially intended to have titles on each page</p>
<ul>
<li>But as I wrote it, the title converged on a certain form</li>
</ul>
<p>Tutorial Improvements
Title.
Table of Contents
Number of pages to complete</p>
<ul>
<li>Now all the pages are being served in the denominator.</li>
<li>It would even include additional content.
Table of Contents</li>
<li>Instead of starting the tutorial from the head.</li>
<li>help menu
<ul>
<li>I want to jump from the table of contents to the target page.</li>
</ul>
</li>
</ul>
<p>Test Improvement
Dirty because of trial and error.</p>
<ul>
<li>A new way to write beautifully.</li>
<li>Old and muddled writing style.
I’ll speak at a workshop the week after next.
I want to keep it clean.</li>
</ul>
<p>drag and drop</p>
<ul>
<li>Change to a form that does not use the browser’s DragDropAPI</li>
</ul>
<p>user page</p>
<ul>
<li>List of places created in the past</li>
</ul>
<p>Organize with Kozaneba</p>
<ul>
<li><a href="https://youtu.be/n0MLqfjpwlA" class="external">https://youtu.be/n0MLqfjpwlA<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li>I realized that the definition of “functions I need for my use” was unclear.</li>
<li>What do I need for my use?
<ul>
<li>Not a tutorial improvement.</li>
<li>I would like to have the ability to list the places we have created.</li>
<li>The phenomenon of the size increasing when dragging is moderately stressful.
<ul>
<li>Because it doesn’t move to the position you want it to move to.</li>
</ul>
</li>
<li>I keep the original sticky note at the time of the split, but often want to replace it
<ul>
<li>I think a replace button on the dialog would be nice.</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr/>
<p>It’s more modest than the rotating gaming kozane, but it can now drag itself.
<img src="https://gyazo.com/8b7465cacb87da9aee6a62481823e90e/thumb/1000" alt="image"/>
Only Kozane. No group yet.
I thought it would stop working when I zoomed in and out… but it was working fine.</p>
<p>I thought that I must be confusing the world coordinate system with the screen coordinate system, and that if I separated vectors into “world coordinate system vectors” and “screen coordinate system vectors” and distinguished them by type, I should be able to find the bug of the mistake, so I added a type.</p>
<ul>
<li>It was a “bug in which a relative vector is converted to the world coordinate system by taking the difference between two absolute vectors in the screen coordinate system.</li>
<li>In other words, we need four vector types: “world absolute,” “world relative,” “screen absolute,” and “screen relative” (wait</li>
<li>And another value “CSS position (<code>{top, left}</code>)” (no!)</li>
</ul>
<p>The group’s stand-alone drag moved, well, easily.</p>
<ul>
<li>(This is because I wrote it so that it would work easily and not have the Kozane-specific offsets.)</li>
</ul>
<p>However, the in/out decision for other objects while dragging doesn’t work.</p>
<ul>
<li>mousemove does not cause mouseenter on div B at the back because div A is following at the very front.</li>
<li><img src="https://gyazo.com/a49ee0ca7f64ad8dabab8602e61b3f16/thumb/1000" alt="image"/></li>
<li>Asking on Twitter: when mousemove comes with div A, I want to detect that the mouse cursor is in div B below it, but I can’t figure out how to do it.
<ul>
<li>
<blockquote>
<p><a href="https://twitter.com/Sheile/status/1427290332836765699" class="external">Sheile<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>: I haven’t tried it, but if I add pointer-events: none; to div A at the timing of mousedown, I think I can get div B’s I think I can get the mousemove event to fire.</p>
</blockquote>
</li>
<li>
<blockquote>
<p>However, it also prevents div A’s mouseup event from being taken, so it’s tricky to handle when you let go of it. …</p>
</blockquote>
</li>
<li>I see, you can ignore pointer events.</li>
<li>The move and drag end of div A is taken by mousemove / mouseup of the innermost parent div, so it’s ok.</li>
<li><img src="https://gyazo.com/09249092d908662e561575caa974c7a7/thumb/1000" alt="image"/></li>
</ul>
</li>
</ul>
<p>Context menu no longer appears.
Selecting a range and moving appears to work okay, so I’ll do the test from here.</p>
<p>next  <a href="./Kozaneba-Development-Diary-2021-08-17" class="internal alias" data-slug="Kozaneba-Development-Diary-2021-08-17">Kozaneba Development Diary 2021-08-17</a></p>
<hr/>
<p>This page is auto-translated from <a href="https://scrapbox.io/nishio/Kozaneba%E9%96%8B%E7%99%BA%E6%97%A5%E8%A8%982021-08-16" class="external">/nishio/Kozaneba開発日記2021-08-16<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> using DeepL. If you looks something interesting but the auto-translated English is not good enough to understand it, feel free to let me know at <a href="https://twitter.com/nishio_en" class="external">@nishio_en<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>. I’m very happy to spread my thought to non-Japanese readers.</p></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false}"></div><button id="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true}"></div></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li><a href="./Kozaneba-Development-Diary-2021-08-17" class="internal">Kozaneba Development Diary 2021-08-17</a></li></ul></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.4.0</a> © 2024</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript">function c(){let t=this.parentElement;t.classList.toggle("is-collapsed");let l=t.classList.contains("is-collapsed")?this.scrollHeight:t.scrollHeight;t.style.maxHeight=l+"px";let o=t,e=t.parentElement;for(;e;){if(!e.classList.contains("callout"))return;let n=e.classList.contains("is-collapsed")?e.scrollHeight:e.scrollHeight+o.scrollHeight;e.style.maxHeight=n+"px",o=e,e=e.parentElement}}function i(){let t=document.getElementsByClassName("callout is-collapsible");for(let s of t){let l=s.firstElementChild;if(l){l.addEventListener("click",c),window.addCleanup(()=>l.removeEventListener("click",c));let e=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=e+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script src="./postscript.js" type="module"></script></html>