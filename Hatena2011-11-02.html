<!DOCTYPE html>
<html lang="en"><head><title>Hatena2011-11-02</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="🪴 Quartz 4.0"/><meta property="og:title" content="Hatena2011-11-02"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Hatena2011-11-02"/><meta name="twitter:description" content="hatena &lt;body> *1320221317*Draw a scatter plot in NumPy. I had been neglecting the NumPy + Matplotlib environment because I was having trouble setting it up, but now that I can't leave it alone any longer, I decided to take the approach of &quot;setting clear goals and learning only the minimum necessary to achieve them in a time trial&quot;."/><meta property="og:description" content="hatena &lt;body> *1320221317*Draw a scatter plot in NumPy. I had been neglecting the NumPy + Matplotlib environment because I was having trouble setting it up, but now that I can't leave it alone any longer, I decided to take the approach of &quot;setting clear goals and learning only the minimum necessary to achieve them in a time trial&quot;."/><meta property="og:image:type" content="image/webp"/><meta property="og:image:alt" content="hatena &lt;body> *1320221317*Draw a scatter plot in NumPy. I had been neglecting the NumPy + Matplotlib environment because I was having trouble setting it up, but now that I can't leave it alone any longer, I decided to take the approach of &quot;setting clear goals and learning only the minimum necessary to achieve them in a time trial&quot;."/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:width" content="1200"/><meta property="og:height" content="630"/><meta property="og:image:url" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta name="twitter:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="og:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="twitter:domain" content="quartz.jzhao.xyz"/><meta property="og:url" content="https:/quartz.jzhao.xyz/Hatena2011-11-02"/><meta property="twitter:url" content="https:/quartz.jzhao.xyz/Hatena2011-11-02"/><link rel="icon" href="./static/icon.png"/><meta name="description" content="hatena &lt;body> *1320221317*Draw a scatter plot in NumPy. I had been neglecting the NumPy + Matplotlib environment because I was having trouble setting it up, but now that I can't leave it alone any longer, I decided to take the approach of &quot;setting clear goals and learning only the minimum necessary to achieve them in a time trial&quot;."/><meta name="generator" content="Quartz"/><link href="./index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><script src="./prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("./static/contentIndex.json").then(data => data.json())</script></head><body data-slug="Hatena2011-11-02"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href=".">🪴 Quartz 4.0</a></h2><div class="spacer mobile-only"></div><div class="search"><button class="search-button" id="search-button"><p>Search</p><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></button><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="search-layout" data-preview="true"></div></div></div></div><button class="darkmode" id="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="./">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>Hatena2011-11-02</a></div></nav><h1 class="article-title">Hatena2011-11-02</h1><p show-comma="true" class="content-meta"><span>Nov 02, 2011</span><span>6 min read</span></p></div></div><article class="popover-hint"><p>hatena</p>
<pre><code>&lt;body>
*1320221317*Draw a scatter plot in NumPy.
I had been neglecting the NumPy + Matplotlib environment because I was having trouble setting it up, but now that I can't leave it alone any longer, I decided to take the approach of &quot;setting clear goals and learning only the minimum necessary to achieve them in a time trial&quot;.

I have ipython, numpy and matplotlib installed. However, the matplotlib tutorial doesn't show anything when I hit show, so I'm not sure if it's installed or not. Last time I did that much and left it. &lt;a href='http://matplotlib.sourceforge.net/users/pyplot_tutorial.html'>Pyplot tutorial &amp;#8212; Matplotlib v1.1.0 documentation&lt;/a>

First, a quick look at the NumPy tutorial. &lt;a href='http://www.scipy.org/Tentative_NumPy_Tutorial#head-864862d3f2bb4c32f04260fac61eb4ef34788c4c'>Tentative NumPy Tutorial -&lt;/a>

ndarray is the parent class of matrix, which is an N-dimension array. ndarray is created by array. import * and I don't like it because it makes it hard to know what came from where, but I'll follow it anyway.
>|python|
In [1]: from numpy import *

In [2]: array([1, 2, 3])
Out[2]: array([1, 2, 3])
||&lt;

It is an N-dimensional array, which means that it is extended to take values in xs[3, 3], just as Python's ordinary sequence type can take values in xs[3]. And just as xs[:] can, xs[:, :] is valid. interesting.

I tried array([1, 2, 3]).transpose() to test vector operations, but it didn't work as expected.
>|python|
In [3]: x = array([1, 2, 3])

In [4]: x.transpose()
Out[4]: array([1, 2, 3])
||&lt;
You can see why by looking at x.shape. If you think that matrices have a two-dimensional structure and vectors have a one-dimensional structure, you are wrong. So I reshaped (3,) from a one-dimensional structure to (1, 3) and now it behaves as expected.
>||
In [5]: x.shape
Out[5]: (3,)

In [6]: x.reshape(1, 3)
Out[6]: array([[1, 2, 3]])

In [7]: _.transpose()
Out[7]: 
array([[1],
       [2],
       [3]])
||&lt;

I know that using matrix would solve the problem, but there are rumors that matrix is full of traps, so I decided to avoid it. I wonder what exactly are the traps. I wonder if c_ or r_ would make it easier.

>|python|
In [14]: c_[[1, 2, 3]]
Out[14]: 
array([[1],
       [2],
       [3]])
||&lt;

When you do an operation on an array and a scalar, the scalar is broadcast to each element of the array, and you can pass an array as the index of the array, which is selected if the array is an int, or selected if the array is a bool, where True is selected. And you can do destructive assignments to it. Cool.

>|python|
In [19]: x = array([1, 2, 3])

In [20]: x > 1
Out[20]: array([False,  True,  True], dtype=bool)

In [21]: x + 1
Out[21]: array([2, 3, 4])

In [22]: x[x % 2 == 1] -= 1

In [23]: x
Out[23]: array([0, 2, 2])
||&lt;

x.view() is shallow copy and x.copy() is deep copy.

There is max, min, sum. cov, mean, std, var. svd. Easy.

Now it's time to write a scatter plot. I'm not sure what to do, but I'll try the simplest from pylab import * for now. ref: &lt;a href='http://d.hatena.ne.jp/pashango_p/ 20090618/1245333148'>Memorandum on matplotlib, a python graph library - Pashango's Blog&lt;/a> By the way, I imported pylab and pressed TAB on pylab. to see what members were there. I was so disappointed that there were 917 members. fromfunction is one of them?

>||
In [27]: from pylab import *

In [28]: scatter(randn(100), randn(100))
Out[28]: &lt;matplotlib.collections.CircleCollection at 0x103fabe90>
||&lt;

randn creates an array of random numbers that follow a standard normal distribution. And I heard that in some environments, show() here brings up a graph window, but in my environment, it does not. I was looking up the problem and found that I could just output the graph to a file. ref: &lt;a href='http://loumo.jp/wp/archive/20100219183704/'>Drawing graphs with matplotlib. - loumo.jp&lt;/a>

>||
In [30]: import matplotlib

In [31]: matplotlib.pyplot.savefig('test.png')

In [32]: !open test.png
||&lt;
&lt;img src=&quot;http://gyazo.com/43e25e76797368a364a92e5d7e4bffa0.png&quot;>

It worked. By the way, I forgot to mention that my environment is MacOSX 10.6.8 and open is a MacOSX command. It opens the file with an appropriate application. In my case, it opens a preview. And preview automatically reloads the open file if it is changed. Well, I guess it doesn't really matter if show() doesn't work.

You may want to try to redraw the graph here with different parameters, but if you redraw it as is, it will be appended to the previous graph. If you want to experiment interactively, you need to remember that clf() is a function to clear and redraw a graph. (I guess it stands for clear figure.)

summary
>||
In [1]: from numpy import *
In [27]: from pylab import *
In [30]: import matplotlib

In [28]: scatter(randn(100), randn(100))
Out[28]: &lt;matplotlib.collections.CircleCollection at 0x103fabe90>

In [31]: matplotlib.pyplot.savefig('test.png')
In [32]: !open test.png

# Try to redraw with different parameters
In [33]: clf()

In [39]: data = c_[randn(100), randn(100)]

In [40]: data = data.dot(array([[1, 1], [0, 1]])) # try to slant it

In [42]: scatter(data[:, 0], data[:, 1])
Out[42]: &lt;matplotlib.collections.CircleCollection at 0x104411290>

In [43]: matplotlib.pyplot.savefig('test.png')
||&lt;

&lt;img src=&quot;http://gyazo.com/8f6627b2553050a9c3d13fd304a41e2c.png&quot;>

PS: I forgot to mention that marker=&quot;+&quot; can be used as an optional argument to scatter.

PS: Specifying alpha=0.5 is cool.

*1320222463* How to combine ipython and pdb to make life easier.
If an unforeseen exception occurs:.
>||
In [55]: scatter(data[:, 0], data[:, 1], marker=&quot;.&quot;)
---------------------------------------------------------------------------
(omitted)
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/axes.pyc in scatter(self, x, y, s, c, marker, cmap, norm, vmin, vmax, alpha, linewidths, faceted, verts, **kwargs)
   5736             sym = syms.get(marker)
   5737             if sym is None and verts is None:
-> 5738                 raise ValueError('Unknown marker symbol to scatter')
   5739             numsides, rotation, symstyle = syms[marker]
   5740 

ValueError: Unknown marker symbol to scatter
||&lt;

Where the hell is the list of available symbols (&lt;a href='http://matplotlib.sourceforge.net/api/artist_api.html?highlight=marker#matplotlib.lines.Line2D. set_marker'>matplotlib.lines.Line2D.set_marker&lt;/a>)? Line2D.set_marker&lt;/a>).

>||
In [56]: pdb
Automatic pdb calling has been turned ON

In [57]: scatter(data[:, 0], data[:, 1], marker=&quot;.&quot;)
> /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/axes.py(5738)scatter()
   5737             if sym is None and verts is None:
-> 5738                 raise ValueError('Unknown marker symbol to scatter')
   5739             numsides, rotation, symstyle = syms[marker]

ipdb> syms
{'x': (4, 0.7853981633974483, 2), '^': (3, 0, 0), 'd': (4, 0, 0), 'h': (6, 0, 0), '+': (4, 0, 2), 'o': (0, 0, 3), 'p': (5, 0, 0), 's': (4, 0.7853981633974483, 0), 'v': (3, 3.141592653589793, 0), '8': (8, 0, 0), '&lt;': (3, 4.71238898038469, 0), '>': (3, 1.5707963267948966, 0)}
||&lt;

Hmmm, not many. I wish I had left the dots in, so I didn't have to include four different triangles.

By the way, you can get out of pdb mode with q. If you type pdb one more time, Auto-pdb is turned off.

And by the way, as for &quot;where can I find a list of symbols I can use?&quot;, I found it in help(scatter), sorry.
&lt;/body>
</code></pre>
<h2 id="hatena-diary-2011-11-02"><a href="https://nishiohirokazu.hatenadiary.org/archive/2011/11/02" class="external">Hatena Diary 2011-11-02<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#hatena-diary-2011-11-02" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>This page is auto-translated from <a href="https://scrapbox.io/nishio/Hatena2011-11-02" class="external">/nishio/Hatena2011-11-02<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> using DeepL. If you looks something interesting but the auto-translated English is not good enough to understand it, feel free to let me know at <a href="https://twitter.com/nishio_en" class="external">@nishio_en<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>. I’m very happy to spread my thought to non-Japanese readers.</p></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false}"></div><button id="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true}"></div></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li><a href="./🤖2023-08-12-07:08" class="internal">🤖2023-08-12 07:08</a></li></ul></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.4.0</a> © 2024</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript">function c(){let t=this.parentElement;t.classList.toggle("is-collapsed");let l=t.classList.contains("is-collapsed")?this.scrollHeight:t.scrollHeight;t.style.maxHeight=l+"px";let o=t,e=t.parentElement;for(;e;){if(!e.classList.contains("callout"))return;let n=e.classList.contains("is-collapsed")?e.scrollHeight:e.scrollHeight+o.scrollHeight;e.style.maxHeight=n+"px",o=e,e=e.parentElement}}function i(){let t=document.getElementsByClassName("callout is-collapsible");for(let s of t){let l=s.firstElementChild;if(l){l.addEventListener("click",c),window.addCleanup(()=>l.removeEventListener("click",c));let e=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=e+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script src="./postscript.js" type="module"></script></html>