<!DOCTYPE html>
<html lang="en"><head><title>Talk to the City Try</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="ü™¥ Quartz 4.0"/><meta property="og:title" content="Talk to the City Try"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Talk to the City Try"/><meta name="twitter:description" content="..."/><meta property="og:description" content="..."/><meta property="og:image:type" content="image/webp"/><meta property="og:image:alt" content="..."/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:width" content="1200"/><meta property="og:height" content="630"/><meta property="og:image:url" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta name="twitter:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="og:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="twitter:domain" content="quartz.jzhao.xyz"/><meta property="og:url" content="https:/quartz.jzhao.xyz/Talk-to-the-City-Try"/><meta property="twitter:url" content="https:/quartz.jzhao.xyz/Talk-to-the-City-Try"/><link rel="icon" href="./static/icon.png"/><meta name="description" content="..."/><meta name="generator" content="Quartz"/><link href="./index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><script src="./prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("./static/contentIndex.json").then(data => data.json())</script></head><body data-slug="Talk-to-the-City-Try"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href=".">ü™¥ Quartz 4.0</a></h2><div class="spacer mobile-only"></div><div class="search"><button class="search-button" id="search-button"><p>Search</p><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></button><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="search-layout" data-preview="true"></div></div></div></div><button class="darkmode" id="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="./">Home</a><p> ‚ùØ </p></div><div class="breadcrumb-element"><a href>Talk to the City Try</a></div></nav><h1 class="article-title">Talk to the City Try</h1><p show-comma="true" class="content-meta"><span>Jun 27, 2024</span><span>19 min read</span></p><ul class="tags"><li><a href="./tags/Governor" class="internal tag-link">Governor</a></li></ul></div></div><article class="popover-hint"><blockquote>
<p><a href="https://x.com/nishio/status/1796156174250734034" class="external">nishio<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> <a href="./Public-Comment-on-AI-and-Copyright" class="internal alias" data-slug="Public-Comment-on-AI-and-Copyright">Public Comment on AI and Copyright</a> collected by Agency for Cultural Affairs was analyzed and visualized by AI(Talk to the City)
<img src="https://gyazo.com/513b9a5424f8f2b112bd9305ed5677dd/thumb/1000" alt="image"/>
<a href="https://x.com/nishio/status/1796156300189208780" class="external">nishio<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> You can switch to Japanese by using the flag icon in the upper right corner
<a href="https://nishio.github.io/tttc_aipubcom_japan/" class="external">https://nishio.github.io/tttc_aipubcom_japan/<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
</blockquote>
<h2 id="experimental-process">experimental process<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#experimental-process" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p><a href="./Talk-to-the-City" class="internal alias" data-slug="Talk-to-the-City">Talk to the City</a>
[/tkgshn/report on Taiwan‚Äôs same-sex marriage debate at Talk to the City](<a href="https://scrapbox.io/tkgshn/report" class="external">https://scrapbox.io/tkgshn/report<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> on Taiwan‚Äôs same-sex marriage debate at Talk to the City).</p>
<p>2024-05-27</p>
<ul>
<li>I was curious about the algorithm for <a href="./Talk-to-the-City-clustering" class="internal alias" data-slug="Talk-to-the-City-clustering">Talk to the City clustering</a> on 2024-05-26, so I looked it up<a href="./tags/Governor" class="tag-link internal alias" data-slug="tags/Governor">Governor</a>‚Äôs race x digital democracy</li>
<li><a href="https://github.com/AIObjectives/talk-to-the-city-reports.git" class="external">https://github.com/AIObjectives/talk-to-the-city-reports.git<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li>tkgshn had a hard time using the visual tool ‚Äú<a href="./Talk-to-the-City-Turbo" class="internal alias" data-slug="Talk-to-the-City-Turbo">Talk to the City Turbo</a>‚Äù, but there is also a CLI tool ‚Äú<a href="./Talk-to-the-City-Reports" class="internal alias" data-slug="Talk-to-the-City-Reports">Talk to the City Reports</a>‚Äù, so let‚Äôs take a look at that.</li>
<li>Pipeline is a single track</li>
</ul>
<p>Consider the data to be tested
- <a href="./Public-Comment-on-AI-and-Copyright" class="internal alias" data-slug="Public-Comment-on-AI-and-Copyright">Public Comment on AI and Copyright</a>
- It‚Äôs rather trashy‚Ä¶</p>
<p>I will do a Polis-like analysis of <a href="./Joint-research-by-Taniguchi-Laboratory,-University-of-Tokyo-and-Asahi-Shimbun" class="internal alias" data-slug="Joint-research-by-Taniguchi-Laboratory,-University-of-Tokyo-and-Asahi-Shimbun">Joint research by Taniguchi Laboratory, University of Tokyo and Asahi Shimbun</a> (UTAS) on another matter first.</p>
<ul>
<li>Polis-like data and natural text are both available.
<ul>
<li>Fewer natural sentences</li>
<li>First, I did a Polis-like analysis ‚úÖ<a href="./pPolis2024-05-27" class="internal" data-slug="pPolis2024-05-27">pPolis2024-05-27</a>.</li>
</ul>
</li>
</ul>
<p>2024-05-30
Extracting natural sentences from UTAS data</p>
<ul>
<li><a href="https://gist.github.com/nishio/de629941b5ac4a080fae88348df1499c" class="external">https://gist.github.com/nishio/de629941b5ac4a080fae88348df1499c<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>
<ul>
<li>126 Politicians Comment on Constitutional Amendments
<ul>
<li>Lots of overlap.</li>
<li>85 excluding duplicates</li>
</ul>
</li>
<li>There are more comments about the House of Councillors.</li>
</ul>
</li>
</ul>
<p>Let‚Äôs try something small for now. <a href="./Small-Start" class="internal alias" data-slug="Small-Start">Small Start</a>
Create and run CSV and config with comment-id and comment-body according to README</p>
<h1 id="extraction">extraction<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#extraction" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>extraction</p>
<pre><code>Running step: extraction
 50%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà                                                      | 2/4 [00:05&lt;00:05,  2.92s/it]JSON error: Expecting value: line 1 column 1 (char 0)
Input was: Severe punishment for foreign powers proceeding
Response was: I'm sorry, but I can only assist in English. If you provide the text in English, I'll be happy to help you refine it.
Retrying...
 75%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà                           | 3/4 [00:07&lt;00:02,  2.51s/it]JSON error: Expecting value: line 1 column 1 (char 0)
Input was: Governing structure reform
Response was: I'm sorry, but it seems like the text &quot;governance reform&quot; is in a language that I am not able to understand. I'm sorry, but it seems like the text &quot;governance reform&quot; is in a language that I am not able to understand.
Retrying...
JSON error: Expecting value: line 1 column 1 (char 0)
Input was: Governing structure reform
Response was: I'm sorry, but it seems like the text &quot;governance reform&quot; is in a language other than English, and I am unable to provide a concise and clear argument based If you could provide a translation or more context, I would be happy to assist further.
Retrying...
JSON error: Expecting value: line 1 column 1 (char 0)
Input was: Governing structure reform
Response was: I'm sorry, but it seems like the text you provided is not related to the topic of artificial intelligence. Could you please provide an argument related to AI for me to help you refine?
Retrying...
JSON error: Expecting value: line 1 column 1 (char 0)
Input was: Governing structure reform
Response was: I'm sorry, but it seems like the text &quot;governance reform&quot; is in a language other than English. Could you please provide a translation or more context so I can assist you better? can assist you better?
Silently giving up on trying to generate valid list.
100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 4/4 [00:12&lt;00:00,  3.23s/it]
</code></pre>
<p>I‚Äôm at a loss to interpret this from Japanese.
If it doesn‚Äôt work after a few retries, you give up. ‚ÄúSilently giving up on trying to generate a valid list.‚Äù
However, the other comments are also in Japanese but easily interpreted, so I guess that means they are too short or ambiguous and fail to extract the meaning.</p>
<ul>
<li>ü§ñ‚ÄúI‚Äôm not sure what you mean by ‚Äògovernance reform‚Äô‚Ä¶‚Äú</li>
</ul>
<h1 id="embedding">embedding<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#embedding" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>embedding</p>
<pre><code>Running step: embedding
100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:10&lt;00:00, 10.26s/it]
</code></pre>
<h1 id="clustering">clustering<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#clustering" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>:</p>
<pre><code>Running step: clustering
Traceback (most recent call last):
  File &quot;/Users/nishio/talk-to-the-city-reports/scatter/venv/lib/python3.12/site-packages/nltk/corpus/util.py&quot;, line 84, in __load
    root = nltk.data.find(f&quot;{self.subdir}/{zip_name}&quot;)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/Users/nishio/talk-to-the-city-reports/scatter/venv/lib/python3.12/site-packages/nltk/data.py&quot;, line 583, in find
    raise LookupError(resource_not_found)
LookupError: 
**********************************************************************
  Resource stopwords not found.
  Please use the NLTK Downloader to obtain the resource:

  >>> import nltk
  >>> nltk.download('stopwords')
</code></pre>
<p>No, no, no, no, no, no, no, no, no, no, no, no, no, no, no.
clustering.py</p>
<pre><code>   stop = stopwords.words(&quot;english&quot;)
   vectorizer_model = CountVectorizer(stop_words=stop)
</code></pre>
<p>You‚Äôre hard-coded to assume that the language is English.
Well, okay, let‚Äôs just go all the way to the end and get the big picture first.</p>
<p>:</p>
<pre><code>Running step: clustering
OMP: Info #276: omp_set_nested routine deprecated, please use omp_set_max_active_levels instead.
2024-05-30 14:43:23,417 - BERTopic - Reduced dimensionality
2024-05-30 14:43:23,423 - BERTopic - Clustered reduced embeddings
</code></pre>
<h1 id="labelling-takeaways-overview">labelling, takeaways, overview<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#labelling-takeaways-overview" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>:</p>
<pre><code>Running step: labelling
100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 3/3 [00:02&lt;00:00,  1.20it/s]
Running step: takeaways
100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 3/3 [00:04&lt;00:00,  1.67s/it]
Running step: overview
</code></pre>
<h1 id="translation">translation<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#translation" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>:</p>
<pre><code>Running step: translation
Translating to Mandarin...
100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:16&lt;00:00,  2.38s/it]
Translating to English...
  0%|                                                                                                                    | 0/7 [00:00&lt;?, ?it/s]JSON error: Expecting ',' delimiter: line 1 column 216 (char 215)
Response was: [&quot;Through public debate, considering Japan's history and education, it is necessary to create a democratic law by taking time into account.&quot;, &quot;It is important to reflect the public opinion by creating a process of &quot;constitutional amendment&quot; through consensus.&quot;, &quot;It is necessary to stop the annual budget system.&quot;, &quot;For the protection of human rights, it is essential to have discussions and collaborations on the internet.&quot;, &quot;Through public debate, considering Japan's history and education, it is necessary to create a democratic law by taking time into account.&quot;, &quot;By passing the process of &quot;constitutional amendment&quot;, reflecting the public opinion is important.&quot;, &quot;For Japan to consider Japan's future, it is necessary to establish a law that will become the basis.&quot;, &quot;By revising the 41st article of the constitution, implementing the national referendum, and reflecting its contents in politics is important.&quot;, &quot;Keep an eye on the &quot;constitutional amendment&quot;.&quot;, &quot;Revise the 41st law, implement the national referendum, and reflect its contents in politics.&quot;]
Retrying batch...
Warning: batch size mismatch!
Batch len: 10
Response len: 9
Batch item 0: Through public debate, an independent constitution that takes into account Japanese traditions and customs should be created over time.
Response: By engaging in public debate, considering Japan's history and education, creating necessary self-defense laws over time is essential
Batch item 1: Public input should be reflected through the &quot;constitution-making&quot; process
Response: By promoting the principles of 'innovation', reflecting the opinions of the people to be considered
Batch item 2: Single-year budget system to be eliminated
Response: It is necessary to stop the annual budget system
Batch item 3: Internet Initiatives Needed to Protect Human Rights
Response: For the protection of human rights, it is essential to have an internet platform for gathering information
Batch item 4: Take time to create an independent constitution that takes into account Japanese traditions and customs through public debate.
Response: By engaging in public debate, considering Japan's history and education, creating necessary self-defense laws over time is essential
Batch item 5: Public opinion should be reflected through the &quot;constitution-making&quot; process.
Response: Establishing laws to become a better future for Japan that the Japanese people consider
Batch item 6: A constitution should be created that the Japanese people believe will benefit Japan's future.
Response: By revisiting discussions and debates, developing Japan's unique education and history, creating necessary self-defense laws over time
Batch item 7: Take time to create an independent constitution that takes into account Japan's unique customs and traditions through discussions with the public.
Response: Keep the focus on 'innovation'
Batch item 8: &quot;Constitutional Creation&quot;.
Response: Amend the 41st law, implement national referendums on important legislation, and reflect its contents in politics
Batch item 9: Article 41 of the Constitution should be amended to allow for referendums on important bills and their content should be reflected in the political process.
Retrying with smaller batches...
</code></pre>
<p>I‚Äôm trying to translate it all together and failing.</p>
<ul>
<li>I had to start over a few times.</li>
<li>As a result, it looks like the translation was done.</li>
</ul>
<h1 id="visualization">visualization<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#visualization" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>:</p>
<pre><code>Running step: aggregation
Running step: visualization
> next-app@0.1.0 build
> next build
</code></pre>
<p>Static HTML is output</p>
<p><img src="https://gyazo.com/cd28455301f8f4eb3c034e1b7bf4cf36/thumb/1000" alt="image"/>
The title should have been set up in config or somewhere else.</p>
<blockquote>
<p>Overview:
The public consultation on constitutional development in Japan revealed three main clusters of opinions. Cluster 0 emphasized the importance of crafting a unique constitution reflecting Japanese traditions, while Cluster 1 focused on constitutional reform through public engagement and utilizing the internet for human rights protection. Cluster 2 highlighted the need for a new constitution with amendments to include national referendums and strengthen the role of the National Diet, along with calls for strict penalties against foreign interventions.
<img src="https://scrapbox.io/api/pages/nishio/gpt/icon" alt="gpt.icon" height="19.5"/>Overview: (in Japanese only)
The public consultation on constitutional reform in Japan revealed three main groups of opinion. Cluster 0 emphasized the importance of creating a unique constitution that reflects Japan‚Äôs traditions, while Cluster 1 focused on constitutional reform through public participation and the use of the Internet to protect human rights. Cluster 2 emphasized the need for a new constitution that includes a referendum on amendments and strengthens the role of the Diet, and called for severe penalties for foreign interference.</p>
</blockquote>
<p><img src="https://gyazo.com/44f207f7dba5759da45359d4026c1481/thumb/1000" alt="image"/></p>
<p>This is what happens when you hover.
<img src="https://gyazo.com/b4edf6bd8b0ac7ad8c90b4dc959f0bb3/thumb/1000" alt="image"/>
This is what happens when you click on it
<img src="https://gyazo.com/daa59e7c46e449879ef4b650b030aeb0/thumb/1000" alt="image"/></p>
<p>Can we put this in this cluster?
<img src="https://gyazo.com/b4c0ca19fdd29845366f5e3a00908ed6/thumb/1000" alt="image"/></p>
<p><img src="https://gyazo.com/2d99689ba283be2603326428a2922153/thumb/1000" alt="image"/>
Translation failure.</p>
<blockquote>
<p>Representative comments:
Through public debate, we should take the time to create an independent constitution that takes into account Japanese traditions and customs.
We should take time to create an independent constitution that takes into account Japanese traditions and customs through public debate.
Take time to create an independent constitution that takes into account Japan‚Äôs unique customs and traditions through discussions with the people.
Through public debate, it is important to take the time to create an independent constitution that takes into account Japanese traditions and customs.
Single-year budget system to be eliminated.</p>
</blockquote>
<ul>
<li>Can we put this in this cluster?</li>
</ul>
<p><img src="https://gyazo.com/39cbb634818132cf5507627f6b9c0f5e/thumb/1000" alt="image"/></p>
<h1 id="appendix">Appendix<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#appendix" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p><img src="https://gyazo.com/9d91ba4647492bdea0946b1d67a586bb/thumb/1000" alt="image"/>
This is useful.</p>
<ul>
<li>I wish there was some progress data along the way.</li>
</ul>
<p>AI Cost
<img src="https://gyazo.com/c0e35ea852610126fe5e9d8a1bfbb20e/thumb/1000" alt="image"/></p>
<p>amount of data</p>
<ul>
<li>Japanese 2450 characters</li>
</ul>
<p>Let‚Äôs try a few more things before we try larger data sets.
Revisit config.
json</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="json" data-theme="github-light github-dark"><code data-language="json" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Recursive Public, Agenda Setting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;question&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;What should be top of the agenda as humanity develops and deploys artificial intelligence?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTAS_2022__SQ6_16_FA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;model&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-3.5-turbo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;extraction&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;workers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;limit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;clustering&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;clusters&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;translation&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;model&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gpt-4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;languages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Mandarin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;English&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;flags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TW&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;EN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;intro&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;This AI-generated report relies on data from the UTAS 2022 (joint research by the University of Tokyo Taniguchi Laboratory and Asahi Shimbun).&quot;</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></figure>
<ul>
<li>
<blockquote>
<p>Titles should have been set up in config or somewhere else.</p>
</blockquote>
<ul>
<li>NAME and QUESTION are it.</li>
</ul>
</li>
<li>You‚Äôve fixed it to three clusters.</li>
<li>The translation part, I set it up like this with the intention of processing it in Japanese and then translating it into English.
<ul>
<li>But since the clustering was code that assumed English, I‚Äôd rather process it in English and translate it into Japanese.</li>
<li>If you want to process Japanese as it is, you need to set morphological analysis and Japanese stop-words for the part of the clustering step that uses CountVectorizer, assuming Japanese.</li>
<li>Add ‚ÄúAll texts should be in English.‚Äù to the extraction prompt and proceed with the policy of extracting in English.</li>
</ul>
</li>
</ul>
<p>re-execute
‚ÄúSevere punishment for the progress of foreign powers‚Äù and ‚Äúreform of the governing structure‚Äù were also said ‚ÄúI don‚Äôt know.‚Äù
Oh, I forgot to translate it into Japanese.
:</p>
<pre><code>So, here is what I am planning to run:
{'step': 'extraction', 'run': False, 'reason': 'nothing changed'}
{'step': 'embedding', 'run': False, 'reason': 'nothing changed'}
{'step': 'clustering', 'run': False, 'reason': 'nothing changed'}
{'step': 'labelling', 'run': False, 'reason': 'nothing changed'}
{'step': 'takeaways', 'run': False, 'reason': 'nothing changed'}
{'step': 'overview', 'run': False, 'reason': 'nothing changed'}
{'step': 'translation', 'run': True, 'reason': 'some parameters changed: languages'}
{'step': 'aggregation', 'run': True, 'reason': 'some dependent steps will re-run: translation'}
{'step': 'visualization', 'run': True, 'reason': 'some dependent steps will re-run: aggregation'}
Looks good? Press enter to continue or Ctrl+C to abort.
</code></pre>
<p>They‚Äôll just redo the second half.</p>
<p>Translation from English to Japanese was batch-processed without any problems.
<img src="https://gyazo.com/df09fdbd0383a3f2ba268babcf4f9a92/thumb/1000" alt="image"/>
Hmmm, I don‚Äôt know the term ‚Äúconstitutional‚Äù, so it‚Äôs a misinterpretation.</p>
<p>prompt: <code>All texts should be in English. Translate Japanese words based on their meaning, not just their sound.</code>
Error in embedding</p>
<ul>
<li><code>TypeError: expected string or buffer</code></li>
<li><img src="https://gyazo.com/e14a78aa645250327a5444578f53eb8e/thumb/1000" alt="image"/>
That‚Äôs the one.</li>
<li><a href="https://github.com/AIObjectives/talk-to-the-city-reports/pull/186" class="external">FIX: LLM sometimes returns string and the code handle it as list by nishio ¬∑ Pull Request #186 ¬∑ AIObjectives/talk-to-the-city-reports ¬∑ GitHub<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>
<p><img src="https://gyazo.com/42ad2adc162133c7db85bbcf2040a56f/thumb/1000" alt="image"/>
Should have named the project.</p>
<h1 id="public-comment-on-ai-and-copyright"><a href="./Public-Comment-on-AI-and-Copyright" class="internal alias" data-slug="Public-Comment-on-AI-and-Copyright">Public Comment on AI and Copyright</a><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#public-comment-on-ai-and-copyright" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>534365 characters
I think it‚Äôs a few hundred yen even if you do it normally, but let‚Äôs try it with 1/10th of the data.</p>
<h2 id="extraction-1">extraction<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#extraction-1" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<blockquote>
<p>Input was: ‚ÄúA Proposed Guidelines for Business Operators‚Äù, Attachment 1, Part 1, related/P13, line 20, ‚ÄúRisks due to Al
Response was: I‚Äôm sorry, but it seems like the text you provided is in Japanese and it‚Äôs not clear how it relates to the task of refining arguments in English. Could you please provide an argument or statement in English that you would like me to work on?</p>
</blockquote>
<ul>
<li>I wonder if this is a misdirect.</li>
</ul>
<p><img src="https://gyazo.com/96d04b3dacc97adfd0532ea689148816/thumb/1000" alt="image"/>
Surprisingly cheap</p>
<p><code>openai.error.InvalidRequestError: This model's maximum context length is 16385 tokens. However, your messages resulted in 17461 tokens. Please reduce the length of the messages.</code>
This is a problem.</p>
<p>Results of various experiments
<img src="https://gyazo.com/93fac38b5ca66a3704982db49350eb71/thumb/1000" alt="image"/>
It‚Äôs time to make the final version.</p>
<p>including everything
<img src="https://gyazo.com/aba0d2524512bed37a47b1f360c3f2a3/thumb/1000" alt="image"/>
Hmmm, that‚Äôs all I get when I include corporate comments.</p>
<ul>
<li>Is the public‚Äôs comment too thin?</li>
<li>Thought it would be more interesting to mix it up‚Ä¶</li>
</ul>
<p>Let‚Äôs limit ourselves to 2013 data from individuals.
<code>&quot;clusters&quot;: 7</code>.</p>
<p><img src="https://gyazo.com/03cfc231950f8299513156ac1c034afb/thumb/1000" alt="image"/>
Hmmm, not much has changed.</p>
<p>Ah, <code>&quot;extraction&quot; &quot;limit&quot;: 12</code> this.</p>
<ul>
<li>Let‚Äôs change it to 24.</li>
</ul>
<p><img src="https://gyazo.com/752caf0a8cdf21c1254f4e09eaca97be/thumb/1000" alt="image"/>
Increase.
But <code>Warning: data for page &quot;/&quot; is 170 kB which exceeds the threshold of 128 kB, this amount of data can reduce performance.</code></p>
<p>I‚Äôll change it further to 48.</p>
<p>:</p>
<pre><code>File &quot;/Users/nishio/talk-to-the-city-reports/scatter/pipeline/steps/translation.py&quot;, line 102, in translate_batch
    parsed = [a.strip() for a in json.loads(response)]
</code></pre>
<p><code>json.decoder.JSONDecodeError: Invalid \uXXXX escape: line 1 column 1098 (char 1097)</code>
Hmmm, this is tricky.</p>
<p>I redid it and it worked.</p>
<ul>
<li>I guess it means that retries are not well implemented, unconfirmed.</li>
</ul>
<p><img src="https://gyazo.com/4532c61d6dc74dbbf653aa1481fee36a/thumb/1000" alt="image"/>
It‚Äôs nice, after all, if it doesn‚Äôt have this many dots, it doesn‚Äôt feel like ‚Äúit‚Äôs a visualization of a distribution‚Äù.</p>
<ul>
<li>Like the feeling that the cluster in the lower right corner is a little too far away.</li>
</ul>
<p>If the points increase as the limit of EXTRECTION is increased, it may mean that the reason why ‚Äúonly opinions from the organization are picked when data from the organization is mixed in‚Äù in the beginning is simply because the limit was reached only by opinions from the organization.</p>
<p>I‚Äôm not sure why it only cost a few cents for both the 2450 Japanese characters UTAS data and the 534365 AI pubic data, because they both hit the LIMIT.
As an experiment, we should try to make the limit bigger.
Increase LIMIT from 48 to 10000. The cost would be about $7.</p>
<p>I let it run, then I read the code.
extraction.py</p>
<pre><code>   comments = pd.read_csv(f&quot;inputs/{config['input']}.csv&quot;)
   limit = config['extraction']['limit']
   comment_ids = (comments['comment-id'].values)[:limit]
</code></pre>
<p>Ah, I see. That‚Äôs how it works.
Then you put in the data for 2013, but suddenly it‚Äôs down to 48!</p>
<p><img src="https://gyazo.com/e0e1c18e00f5b575f2fa37ab845b0fd2/thumb/1000" alt="image"/>
We‚Äôve come this far and now we‚Äôre dead.
:</p>
<pre><code> 99%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñè| 666/671 [29:36&lt;00:13,  2.67s/it]
Traceback (most recent call last):
</code></pre>
<p><code>openai.error.InvalidRequestError: This model's maximum context length is 16385 tokens. However, your messages resulted in 19680 tokens. Please reduce the length of the messages.</code></p>
<p>I‚Äôm wondering if the format has changed for the data after 185001345000002001, or if it‚Äôs being combined at the time of CSV extraction.
I‚Äôd have to hand scrape that and make it a 1997 case to get it to work.
But, well, technically, you can check for such oversize errors before actually hitting the API, and the oversize error messages should be a little easier to debug.</p>
<ul>
<li><a href="./Polis-is-opinion-clustering,-TTTC-is-topic-clustering" class="internal alias" data-slug="Polis-is-opinion-clustering,-TTTC-is-topic-clustering">Polis is opinion clustering, TTTC is topic clustering</a></li>
</ul>
<p>We‚Äôre making progress.
:</p>
<pre><code>100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 666/666 [30:12&lt;00:00,  2.72s/it]
Running step: embedding
100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 6/6 [00:15&lt;00:00,  2.65s/it]
Running step: clustering
OMP: Info #276: omp_set_nested routine deprecated, please use omp_set_max_active_levels instead.
2024-05-31 04:37:45,187 - BERTopic - Reduced dimensionality
2024-05-31 04:37:45,284 - BERTopic - Clustered reduced embeddings
Running step: labelling
100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:04&lt;00:00,  1.74it/s]
Running step: takeaways
100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 7/7 [00:16&lt;00:00,  2.35s/it]
Running step: overview
</code></pre>
<blockquote>
<p>I‚Äôm wondering if the format has changed for the data after 185001345000002001, or if it‚Äôs being combined at the time of CSV extraction.
Conclusion, from the third PDF, the <code>‚óè receipt number</code> is preceded by a space or not.</p>
</blockquote>
<ul>
<li>That some of them have been combined because the delimiting condition was that they begin with <code>‚óèreceipt number</code>.</li>
<li>Fixed, there are 2985 cases.</li>
</ul>
<p>:</p>
<pre><code> 93%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà       | 556/601 [1:33:50&lt;07:35, 10.13s/it]
Traceback (most recent call last):
  File &quot;/Users/nishio/talk-to-the-city-reports/scatter/pipeline/steps/translation.py&quot;, line 102, in translate_batch
    parsed = [a.strip() for a in json.loads(response)]
                                ^^^^^^^^^^^^^^^^^^^^
...
json.decoder.JSONDecodeError: Unterminated string starting at: line 1 column 382 (char 381)
</code></pre>
<p>No, no, no, seriously?</p>
<p>Same cause as this.</p>
<ul>
<li>
<blockquote>
<p><code>json.decoder.JSONDecodeError: Invalid \uXXXX escape: line 1 column 1098 (char 1097)</code></p>
</blockquote>
</li>
<li>
<blockquote>
<p>Hmmm, this is tricky.</p>
</blockquote>
</li>
<li>
<blockquote>
<p>I redid it and it worked.</p>
</blockquote>
</li>
<li>
<blockquote>
<p>I guess it means retries are not implemented well enough, unconfirmed.
I‚Äôm not going to run it for an hour and a half and start over because it rubbed me the wrong way‚Ä¶</p>
</blockquote>
</li>
</ul>
<p>Let‚Äôs turn off the translation once and try to finish it.
<img src="https://gyazo.com/3812304949fb72e6d10c8414abb84422/thumb/1000" alt="image"/>
<img src="https://gyazo.com/cad9b3292c1e806ab450e1e9f2682291/thumb/1000" alt="image"/></p>
<p>For example, if we do this and say, ‚ÄúLet‚Äôs try a larger number of clusters,‚Äù will the translation be redone?</p>
<ul>
<li>I‚Äôm assuming that the cluster summary text, for example, is regenerated and needs to be retranslated, but the EXTRACTION results don‚Äôt, do they?</li>
<li>I think it should be cached and reused, but I wonder if there is a mechanism for that.</li>
</ul>
<p>I was thinking, ‚ÄúThe translation will be finished in 5 minutes, so I‚Äôll deploy and go to bed when it‚Äôs done,‚Äù when the Chinese translation phase started (a little over an hour to go).</p>
<p>2024-05-31
<img src="https://gyazo.com/29a6818e0bb23986f1992c5ab5766713/thumb/1000" alt="image"/>
It‚Äôs done.</p>
<p>You‚Äôve had a lot of trouble and redoing things, but you‚Äôre still within the expected amount.
<img src="https://gyazo.com/a1b1c1f9c32359eef0543505a5e202b5/thumb/1000" alt="image"/></p>
<blockquote>
<p>If we do something like ‚Äúlet‚Äôs try more clusters,‚Äù will the translation be redone?
:</p>
</blockquote>
<pre><code>% python main.py configs/aipubcom.json                       
(!) {'step': 'clustering', 'filename': 'clusters.csv', 'dependencies': {'params': ['clusters'], 'steps': ['embedding']}, 'options': {'clusters': 8}} step parameter 'clusters' changed from '7' to '50'
diff_params ['clusters']
So, here is what I am planning to run:
{'step': 'extraction', 'run': False, 'reason': 'nothing changed'}
{'step': 'embedding', 'run': False, 'reason': 'nothing changed'}
{'step': 'clustering', 'run': True, 'reason': 'some parameters changed: clusters'}
{'step': 'labelling', 'run': True, 'reason': 'some dependent steps will re-run: clustering'}
{'step': 'takeaways', 'run': True, 'reason': 'some dependent steps will re-run: clustering'}
{'step': 'overview', 'run': True, 'reason': 'some dependent steps will re-run: labelling, takeaways'}
{'step': 'translation', 'run': True, 'reason': 'some dependent steps will re-run: labelling, takeaways, overview'}
{'step': 'aggregation', 'run': True, 'reason': 'some dependent steps will re-run: clustering, labelling, takeaways, overview, translation'}
{'step': 'visualization', 'run': True, 'reason': 'some dependent steps will re-run: aggregation'}
Looks good? Press enter to continue or Ctrl+C to abort.
</code></pre>
<p>It looks like the translation only needs to be the part that changes.</p>
<p>:</p>
<pre><code>100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 606/606 [2:31:52&lt;00:00, 15.04s/it]
Translating to Taiwan...
  9%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà                                                                                              | 53/606 [08:00&lt;1:13:18,  7.95s/it]
</code></pre>
<p>What, it looks like you spent 2.5 hours re-translating it?</p>
<p>:</p>
<pre><code>100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñä| 605/606 [1:38:47&lt;00:09,  9.80s/it]
Traceback (most recent call last):
  File &quot;/Users/nishio/talk-to-the-city-reports/scatter/pipeline/steps/translation.py&quot;, line 119, in translate_batch
    return translate_batch(batch, lang_prompt, model, retries - 1)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...        
RecursionError: maximum recursion depth exceeded
python main.py configs/aipubcom.json  56.16s user 33.46s system 0% cpu 4:13:37.44 total
</code></pre>
<p>What the hell <a href="https://gist.github.com/nishio/b5e54d84a080fa7397559f32ee48dc84" class="external">full stacktrace<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>
You‚Äôve taken four hours and failed with an error that is only probabilistic.
<img src="https://gyazo.com/08143c5154dee81bf134625d3c8f31f4/thumb/1000" alt="image"/>
The cost isn‚Äôt that high.
And there‚Äôs something wrong with the translation running for four hours in a situation that only changed the number of clusters this time in the first place.
The probability of having to start over increases the larger the data size because there is a lack of care for probable problems.</p>
<p><img src="https://gyazo.com/c9a671b43b4488ac2c82390ac847e3d3/thumb/1000" alt="image"/>
The Japanese version has already been translated, but the Taiwanese version was a flop, so there is no data for the Japanese translation.
The 50 clusters divided into 50 clusters are all sorts of unique and interesting.
It might be interesting to create a question from each of these clusters that can be divided into pros and cons and polis it.</p>
<p>Future Direction</p>
<ul>
<li>The report for Japanese users with Japanese input will be able to be executed in Japanese instead of English, which is currently done internally.</li>
<li>Improve the translation script a bit more, to the point where you can check the cluster in English without translation first, and then add more languages later, Japanese, ‚Ä¶ and so on.</li>
<li>It‚Äôs difficult to process data from 20,000 people in the current situation, where 5,000 data points or so are created from 2,000 human pubic comments, all of which are plotted, and clustering is applied in the previous step to combine similar opinions into one.</li>
</ul>
<p>2024-06-03</p>
<ul>
<li><a href="./Visualize-the-contents-of-the-Plurality-book-with-Talk-to-the-City" class="internal alias" data-slug="Visualize-the-contents-of-the-Plurality-book-with-Talk-to-the-City">Visualize the contents of the Plurality book with Talk to the City</a>
<img src="https://gyazo.com/516d87e486692d3102793a8b5b27461e/thumb/1000" alt="image"/>
Well, to filter when this kind of garbage is generated‚Ä¶</li>
<li>There doesn‚Äôt seem to be an official, easy way to do this.</li>
</ul>
<p>Add a filter to `embedding.py‚Äú and force re-run</p>
<p>util.py</p>
<pre><code>    for (i, option) in enumerate(sysargv):
        if option == '-f':
            config['force'] = True
        if option == '-o':
            config['only'] = sysargv[i + 1]
        if option == '-skip-interaction':
            config['skip-interaction'] = True
</code></pre>
<p>Oh, no, they‚Äôll check here.
<code>ValueError: Make sure that the embeddings are a numpy array with shape: (len(docs), vector_dim) where vector_dim is the dimensionality of the vector embeddings. </code></p>
<p>I‚Äôll have to rewrite the args.csv in front of me.
filter_argument.py</p>
<pre><code>import pandas as pd

# Load the arguments from the CSV file
arguments = pd.read_csv(&quot;outputs/plurality/args.csv&quot;)

# List of arguments to ignore
ignores = [&quot;error&quot;, &quot;argument&quot;, &quot;reference&quot;, &quot;references&quot;, &quot;source&quot;, &quot;sources&quot;, &quot;message&quot;, &quot;contributions&quot;]

# show size
print(len(arguments))

# Filter out the ignored arguments
filtered_arguments = arguments[~arguments['argument'].isin(ignores)]

# show size
print(len(filtered_arguments))

# write filtered_arguments to output/plurality/args.csv
filtered_arguments.to_csv(&quot;outputs/plurality/args.csv&quot;, index=False)
</code></pre>
<p><code>arguments_array.shape=(3497,), embeddings_array.shape=(3353, 1536)</code>
I updated the args, but for some reason it‚Äôs not re-running. force with -o again.
<code>arguments_array.shape=(3497,), embeddings_array.shape=(3497, 1536)</code>
It‚Äôs done.</p>
<p>Oh, better.
<img src="https://gyazo.com/fe17a549997d15573ac078150958add6/thumb/1000" alt="image"/>
Released.
<a href="https://nishio.github.io/tttc_plurality/" class="external">https://nishio.github.io/tttc_plurality/<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>2024-06-17</p>
<blockquote>
<p>Encountered 15 files that should have been pointers, but weren‚Äôt:</p>
</blockquote>
<hr/>
<p>This page is auto-translated from [/nishio/Talk to the CityË©¶„Åô](<a href="https://scrapbox.io/nishio/Talk" class="external">https://scrapbox.io/nishio/Talk<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> to the CityË©¶„Åô) using DeepL. If you looks something interesting but the auto-translated English is not good enough to understand it, feel free to let me know at <a href="https://twitter.com/nishio_en" class="external">@nishio_en<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>. I‚Äôm very happy to spread my thought to non-Japanese readers.</p></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false}"></div><button id="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true}"></div></div></div><div class="toc desktop-only"><button type="button" id="toc" class aria-controls="toc-content" aria-expanded="true"><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content" class><ul class="overflow"><li class="depth-1"><a href="#experimental-process" data-for="experimental-process">experimental process</a></li><li class="depth-0"><a href="#extraction" data-for="extraction">extraction</a></li><li class="depth-0"><a href="#embedding" data-for="embedding">embedding</a></li><li class="depth-0"><a href="#clustering" data-for="clustering">clustering</a></li><li class="depth-0"><a href="#labelling-takeaways-overview" data-for="labelling-takeaways-overview">labelling, takeaways, overview</a></li><li class="depth-0"><a href="#translation" data-for="translation">translation</a></li><li class="depth-0"><a href="#visualization" data-for="visualization">visualization</a></li><li class="depth-0"><a href="#appendix" data-for="appendix">Appendix</a></li><li class="depth-0"><a href="#public-comment-on-ai-and-copyright" data-for="public-comment-on-ai-and-copyright">Public Comment on AI and Copyright</a></li><li class="depth-1"><a href="#extraction-1" data-for="extraction-1">extraction</a></li></ul></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li><a href="./Polis-is-opinion-clustering,-TTTC-is-topic-clustering" class="internal">Polis is opinion clustering, TTTC is topic clustering</a></li><li><a href="./Try-Talk-to-the-City-Turbo" class="internal">Try Talk to the City Turbo</a></li></ul></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.4.0</a> ¬© 2024</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript">function c(){let t=this.parentElement;t.classList.toggle("is-collapsed");let l=t.classList.contains("is-collapsed")?this.scrollHeight:t.scrollHeight;t.style.maxHeight=l+"px";let o=t,e=t.parentElement;for(;e;){if(!e.classList.contains("callout"))return;let n=e.classList.contains("is-collapsed")?e.scrollHeight:e.scrollHeight+o.scrollHeight;e.style.maxHeight=n+"px",o=e,e=e.parentElement}}function i(){let t=document.getElementsByClassName("callout is-collapsible");for(let s of t){let l=s.firstElementChild;if(l){l.addEventListener("click",c),window.addCleanup(()=>l.removeEventListener("click",c));let e=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=e+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script src="./postscript.js" type="module"></script></html>