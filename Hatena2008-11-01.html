<!DOCTYPE html>
<html lang="en"><head><title>Hatena2008-11-01</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="ğŸª´ Quartz 4.0"/><meta property="og:title" content="Hatena2008-11-01"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Hatena2008-11-01"/><meta name="twitter:description" content="hatena &lt;body> *1225517718*[Mid-term limit] when you find yourself in the middle of the day. It was very fast after not being able to tweak the midpoint for a while."/><meta property="og:description" content="hatena &lt;body> *1225517718*[Mid-term limit] when you find yourself in the middle of the day. It was very fast after not being able to tweak the midpoint for a while."/><meta property="og:image:type" content="image/webp"/><meta property="og:image:alt" content="hatena &lt;body> *1225517718*[Mid-term limit] when you find yourself in the middle of the day. It was very fast after not being able to tweak the midpoint for a while."/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:width" content="1200"/><meta property="og:height" content="630"/><meta property="og:image:url" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta name="twitter:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="og:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="twitter:domain" content="quartz.jzhao.xyz"/><meta property="og:url" content="https:/quartz.jzhao.xyz/Hatena2008-11-01"/><meta property="twitter:url" content="https:/quartz.jzhao.xyz/Hatena2008-11-01"/><link rel="icon" href="./static/icon.png"/><meta name="description" content="hatena &lt;body> *1225517718*[Mid-term limit] when you find yourself in the middle of the day. It was very fast after not being able to tweak the midpoint for a while."/><meta name="generator" content="Quartz"/><link href="./index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><script src="./prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("./static/contentIndex.json").then(data => data.json())</script></head><body data-slug="Hatena2008-11-01"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href=".">ğŸª´ Quartz 4.0</a></h2><div class="spacer mobile-only"></div><div class="search"><button class="search-button" id="search-button"><p>Search</p><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></button><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="search-layout" data-preview="true"></div></div></div></div><button class="darkmode" id="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="./">Home</a><p> â¯ </p></div><div class="breadcrumb-element"><a href>Hatena2008-11-01</a></div></nav><h1 class="article-title">Hatena2008-11-01</h1><p show-comma="true" class="content-meta"><span>Nov 01, 2008</span><span>8 min read</span></p></div></div><article class="popover-hint"><p>hatena</p>
<pre><code>&lt;body>
*1225517718*[Mid-term limit] when you find yourself in the middle of the day.
It was very fast after not being able to tweak the midpoint for a while.
http://shinh.skr.jp/m/?date=20081028
http://homepage1.nifty.com/herumi/diary/0810.html#30

I knew that I would be criticized for &quot;using vector to do erase and so on, which is slow,&quot; so I was going to fix it and then compare the execution time, but the source code is on CodeRepos, so it was corrected before I fixed it. I thought it was a loss of opportunity not to release the source code because I was afraid that I might be criticized if I released it in its current state.

>>
Read the code. Well, the chuunibu-chic is great and all, but the function think_[a23]_turns? is not easy to maintain...
&lt;&lt;

Hmm, think_a_turn is the last turn, so there is no need to create a &quot;list of cards available for the next turn&quot;, and think_3_turns is the beginning of the round, so the round score is [0, 0, 0] and there is no need to add up the scores from the turn to it. I could put these three functions together, but I couldn't figure out how to do it without paying unnecessary costs, so I've separated them.

>>
Maybe this code has not been fully explored.

ã€€for(size_t i=0; i &lt; N; i++){
ã€€ã€€cards rest1 = except_one(unknowns, i);
ã€€ã€€for(size_t j=i+1; j &lt; N; j++){

I think this is not the case when the two enemies have different scores.
&lt;&lt;

Let's use think_a_turn, which requires the least amount of unnecessary processing.

>|cpp|
    for(size_t i=0; i &lt; N; i++){
      for(size_t j=i+1; j &lt; N; j++){
	eval_value s = measure(my, unknowns[i], unknowns[j], round_score);
	if(my == get_center(my, unknowns[i], unknowns[j])){
	  // winner is me. 
	  score += s * 2;
	}else{
	  score += s;
	  score += measure(my, unknowns[j], unknowns[i], round_score);
	}
      }
    }
||&lt;

When you are in the middle in a turn, swapping the moves played by the other two players does not change the result. Therefore, it does not matter if you do only one side of the process and multiply it by two. On the other hand, if I am not in the middle, I calculate again the version in which the pair is turned over. In about 1/3 of the cases, the two processes can be done once.

>>
By the way, as a way to speed up the process, since there are only 52 cards anyway, I think that creating a bool seen[52] before starting to read and switching it between false and true each time a card is used will speed up the process.
&lt;&lt;

Is that what this is about?
>|cpp|
       for(size_t i=0; i &lt; 52; i++){
           if (seen[i]) continue;
           for(size_t j=0; j &lt; 52; j++){
               if (seen[j]) continue;
||&lt;

I wonder if it is that obvious that this is fast.
In the last turn of reading, what would really be a 5 * 11 * 10 loop would balloon to 52 * 52 * 52 times. Even though most of the time it is just a simple job of taking a value from an array and dumping it, this function is called 6 * 13 * 12 * 7 * 15 * 14 times from upstream, so I don't think it is obvious that the increased cost is acceptable. Well, of course it would be slow to reallocate vectors and so on.

I wonder if it is faster to swap 3 and 5 to [1, 2, 5, 4, 3] and have the information &quot;I have 4 cards in hand&quot; when I use 3 in a hand [1, 2, 3, 4, 5] because the order is irrelevant.

*1225525027*[cpp]How do I compare the performance of the search?
What is the fastest way to follow an element when &quot;given N elements, I want to calculate something about a permutation that selects M of them. And how can I write a benchmark to find out which is the fastest? If I write only the loop around the elements, the compiler may say &quot;this is not doing anything&quot; and delete it, and if I write N elements in the program by mistake, they may be calculated to some extent at compile time.


As for the input, well, let's just pass it in as a command line argument.


And something that doesn't eat up as much processing time as possible and doesn't make the compiler erase... Maybe a single global variable to which each permutation value is added?

*1225530500*Diet
f:id:nishiohirokazu:20081101180521p:image

I tried to lose fat to an age-appropriate level. After all, I used to drink Pilkul every day without thinking, eat sea chicken for breakfast every morning, and have a pork bowl at Sukiya for lunch every day, only to calculate the calories properly and exclaim, &quot;Oh my God, this is so high in calories! I was able to lose weight just by shouting out, &quot;Oh my God, this is so many calories! There is a lot of talk about &quot;recording diets&quot; and such, but I think the most important thing is to be aware of what you are eating and how much you are eating.

*1225532547*Make a tsukotsu nabe
f:id:nishiohirokazu:20081101184225j:image

I always avoided daikon radishes because I couldn't consume them all, but they were selling small pieces, so I bought those.

f:id:nishiohirokazu:20081101184929j:image

If you look closely, you will see that it says to put in motsu nabe (motsu, burdock root, leek and cabbage), but leek is the only thing that duplicates it. It says to add vegetables after it starts boiling, but I put them in first because I thought the daikon and carrots would not be cooked through.

f:id:nishiohirokazu:20081101190125j:image

Gumming.

f:id:nishiohirokazu:20081101191046j:image

I added chives and the not-too-hard parts of Chinese cabbage.

I didn't know it until after I made it, but tsukimono has a certain smell.

-----

It was delicious. Once cooked, the smell was not bothersome.

*1225542946*Dishwasher of the future (fantasy)
It contains many genetically modified amoebas, which become excited when they are made to listen to certain frequencies of sound, and come out of the culture tank and go around eating organic matter on the dishes. As long as there is food, they divide and eat anyway. When there is no more food, the amoeba starts alcoholic fermentation, and the sensor detects the increase in alcohol concentration inside the dishwasher and plays a sound with a frequency that makes the amoeba want to go home. When the amoeba returns home, the dishwashing is complete.


It is very eco-friendly as it uses no detergent or water at all. The byproduct is alcohol, which can be used for disinfection. It can also be switched to a mode that produces acetic acid for cleaning sinks.

*1225546707*test
>>
&lt;aaa
&lt;&lt;

What the &amp;lt;/ppp> is this?

>||
>>
&lt;aaa
&lt;&lt;
||&lt;

appears when you write.
&lt;/body>
&lt;comments>
&lt;comment>
&lt;username>shinichiro_h&lt;/username>
&lt;body>Ah, I see > I'm turning it over&lt;br>&lt;br>seen's means&lt;br>&lt;br> for(size_t i=0; i&lt;hand.size(); i++){&lt;br> if (seen[i]) continue;&lt;br> for(size_t j=0; j&lt; unknowns.size(); j++){&lt;br> if (seen[j]) continue;&lt;br>&lt;br> that means. It's like hand and unknowns are not updated once the search starts. Don't you think 7 * 15 * 15 * 7 * 15 * 15 or so sounds good? Also, I think swap would be better. &lt;BR>&lt;BR>And think_*_turns speed is not too expensive if you add a function object. If vector/list/deque is not updated, the bottleneck will probably be the point count, so I think it would be OK to branch with if, prioritizing maintainability.... &lt;/body>
&lt;timestamp>1225521811&lt;/timestamp>
&lt;/comment>
&lt;comment>
&lt;username>nishiohirokazu&lt;/username>
&lt;body>Oh, I see, it doesn't have to be 52 * 52 * 52. Doesn't look bad. &lt;br> I should do if (seen[unknowns[j]]) continue; or do hand_is_seen[7], unknown_is_seen[15]. &lt;BR>&lt;BR>I don't understand what you mean by &quot;plugging in a function object&quot;, but if we lump the different parts of the behavior into a function object and give that function object to the &quot;common process&quot;, the compiler should inline it for us so we don't have to pay additional calling costs. Is that what you are saying? &lt;/body>
&lt;timestamp>1225524450&lt;/timestamp>
&lt;/comment>
&lt;comment>
&lt;username>shinichiro_h&lt;/username>
&lt;body>I haven't really thought about it, but I think something like that would probably work > Function Objects&lt;br>&lt;br>Well, personally I don't mind the cost, do I? I'm not sure how much I'd like to see it. &lt;/body>
&lt;timestamp>1225544948&lt;/timestamp>
&lt;/comment>
&lt;/comments>
</code></pre>
<h2 id="hatena-diary-2008-11-01"><a href="https://nishiohirokazu.hatenadiary.org/archive/2008/11/01" class="external">Hatena Diary 2008-11-01<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#hatena-diary-2008-11-01" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>This page is auto-translated from <a href="https://scrapbox.io/nishio/Hatena2008-11-01" class="external">/nishio/Hatena2008-11-01<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> using DeepL. If you looks something interesting but the auto-translated English is not good enough to understand it, feel free to let me know at <a href="https://twitter.com/nishio_en" class="external">@nishio_en<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>. Iâ€™m very happy to spread my thought to non-Japanese readers.</p></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false}"></div><button id="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true}"></div></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.4.0</a> Â© 2024</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript">function c(){let t=this.parentElement;t.classList.toggle("is-collapsed");let l=t.classList.contains("is-collapsed")?this.scrollHeight:t.scrollHeight;t.style.maxHeight=l+"px";let o=t,e=t.parentElement;for(;e;){if(!e.classList.contains("callout"))return;let n=e.classList.contains("is-collapsed")?e.scrollHeight:e.scrollHeight+o.scrollHeight;e.style.maxHeight=n+"px",o=e,e=e.parentElement}}function i(){let t=document.getElementsByClassName("callout is-collapsible");for(let s of t){let l=s.firstElementChild;if(l){l.addEventListener("click",c),window.addCleanup(()=>l.removeEventListener("click",c));let e=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=e+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script src="./postscript.js" type="module"></script></html>