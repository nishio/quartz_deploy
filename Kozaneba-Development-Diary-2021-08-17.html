<!DOCTYPE html>
<html lang="en"><head><title>Kozaneba Development Diary 2021-08-17</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="🪴 Quartz 4.0"/><meta property="og:title" content="Kozaneba Development Diary 2021-08-17"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Kozaneba Development Diary 2021-08-17"/><meta name="twitter:description" content="prev Kozaneba Development Diary 2021-08-16 Try [Kakau.app If you want more freedom, the Kozaneba way is better, but where do you feel Kakau is better? The one that comes up with the ..."/><meta property="og:description" content="prev Kozaneba Development Diary 2021-08-16 Try [Kakau.app If you want more freedom, the Kozaneba way is better, but where do you feel Kakau is better? The one that comes up with the ..."/><meta property="og:image:type" content="image/webp"/><meta property="og:image:alt" content="prev Kozaneba Development Diary 2021-08-16 Try [Kakau.app If you want more freedom, the Kozaneba way is better, but where do you feel Kakau is better? The one that comes up with the ..."/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:width" content="1200"/><meta property="og:height" content="630"/><meta property="og:image:url" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta name="twitter:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="og:image" content="https://quartz.jzhao.xyz/static/og-image.png"/><meta property="twitter:domain" content="quartz.jzhao.xyz"/><meta property="og:url" content="https:/quartz.jzhao.xyz/Kozaneba-Development-Diary-2021-08-17"/><meta property="twitter:url" content="https:/quartz.jzhao.xyz/Kozaneba-Development-Diary-2021-08-17"/><link rel="icon" href="./static/icon.png"/><meta name="description" content="prev Kozaneba Development Diary 2021-08-16 Try [Kakau.app If you want more freedom, the Kozaneba way is better, but where do you feel Kakau is better? The one that comes up with the ..."/><meta name="generator" content="Quartz"/><link href="./index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><script src="./prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("./static/contentIndex.json").then(data => data.json())</script></head><body data-slug="Kozaneba-Development-Diary-2021-08-17"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href=".">🪴 Quartz 4.0</a></h2><div class="spacer mobile-only"></div><div class="search"><button class="search-button" id="search-button"><p>Search</p><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></button><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="search-layout" data-preview="true"></div></div></div></div><button class="darkmode" id="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="./">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>Kozaneba Development Diary 2021-08-17</a></div></nav><h1 class="article-title">Kozaneba Development Diary 2021-08-17</h1><p show-comma="true" class="content-meta"><span>Jan 25, 2022</span><span>10 min read</span></p></div></div><article class="popover-hint"><p>prev  <a href="./Kozaneba-Development-Diary-2021-08-16" class="internal alias" data-slug="Kozaneba-Development-Diary-2021-08-16">Kozaneba Development Diary 2021-08-16</a></p>
<h2 id><img src="https://gyazo.com/d051980ddc2d3adbd02f96a93047d25c/thumb/1000" alt="image"/></h2>
<p>Try [Kakau.app</p>
<ul>
<li>If you want more freedom, the Kozaneba way is better, but where do you feel Kakau is better?</li>
<li>The one that comes up with the help button in the lower left corner is a keyboard shortcut, I think that’s the clue.</li>
<li>In other words, “highly flexible placement is achieved by the keyboard” instead of “highly flexible placement is achieved by the pointer.
<ul>
<li>They’re supposed to focus on the parts that can be done with a keyboard.</li>
</ul>
</li>
<li>You’re right, Kozaneba is useless without a pointer.
<ul>
<li>I’m thinking, “Of course you do.”</li>
<li>Regroup thought “you know iPad+ApplePencil”, but well, it wasn’t that common yet.</li>
<li>Kozaneba also assumes “there is a touch screen capable of two-finger gestures.”</li>
<li>However, different users have different devices, so I’d prefer to be able to customize how they’re combined.</li>
</ul>
</li>
<li>If Kozaneba were to be used in an environment without a pointer?
<ul>
<li>Need a cursor, and two of them.</li>
<li>The added kozanes have an implicit order depending on the time of addition, so they can be selected by a one-dimensional cursor operation, which is the input cursor</li>
<li>There is an output cursor on the side to be placed, and the kozane selected by the input cursor is transferred to the output cursor position by key operation.</li>
<li>It’s not a matter of reducing the degree of freedom, it’s a matter of trying to increase the freedom and not making it more complicated and monstrous.</li>
<li>Implicit groups are created and added to them during keyboard operations
<ul>
<li>The default addition of an outline processor is like a tab delimiter.</li>
<li>A new group is created when “new group” which is equivalent to a new line is created.</li>
</ul>
</li>
<li>The group selected by the cursor can be moved back and forth, folded, or joined to the end of the group in front of it.</li>
<li>This is, in essence, just a different way of displaying the outline processor.</li>
<li>It would be nice to be able to read a tree expressed in indentation depth from an outline processor (or Scrapbox) as a tree, that’s what I need too!</li>
</ul>
</li>
<li>In other words, it is enough to “display the tree structure in group view” and “infer the tree structure from the arrangement of groups”. The latter is easy to do, but hard to make it work without discomfort.</li>
</ul>
<p>By the way, as for curly brace, it seems natural to introduce it in the form of “group frame decoration”.</p>
<hr/>
<p>Continued from yesterday</p>
<blockquote>
<p>The context menu no longer appears.</p>
</blockquote>
<ul>
<li>Wow. Okay.</li>
<li>When div A follows mousemove, I want to detect that the mouse cursor is in div B below it.</li>
<li>pointer-events: none; on div A at the timing of mousedown</li>
<li>div A’s mouseup event will also not be taken.</li>
<li>I’m taking it with mousemove / mouseup of the parent div at the far end, so it’s ok…</li>
<li>was not.</li>
<li>mouseup occurs before click, but if you change back to pointer-events: auto; in mouseup, you can’t get click.</li>
</ul>
<p>Just call onClick when you mouseup without mousemove.</p>
<ul>
<li>→ Menu display position is set to event.currentTarget.</li>
<li>Need to save the element at the time of mousedown.</li>
</ul>
<p>ts</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="typescript" data-theme="github-light github-dark"><code data-language="typescript" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> itemStore</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {[</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> itemStore[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// can be undefined</span></span></code></pre></figure>
<p>Isn’t it strange that x can be undefined and yet be of type TItem? Is there some option?</p>
<ul>
<li>There it is: <a href="https://www.typescriptlang.org/ja/tsconfig#noUncheckedIndexedAccess" class="external">https://www.typescriptlang.org/ja/tsconfig#noUncheckedIndexedAccess<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li><a href="https://twitter.com/tsukkee/status/1427492183351779329?s=20" class="external">thanks @tsukkee<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ul>
<p>test</p>
<ul>
<li>Transition of how to make the initial state (e.g., two groups containing one kozane, etc.)</li>
<li>T1: I first exposed setGlobal and used it to set the appropriate internal state</li>
<li>T2: Next it is read from json in cy.fixture
ts</li>
</ul>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="typescript" data-theme="github-light github-dark"><code data-language="typescript" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fixture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group_simple_json.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  cy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setGlobal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(json);</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></figure>
<ul>
<li>T3:
<ul>
<li>I don’t think setGlobal can do everything too well to be exposed to users in production.</li>
<li>By creating an initial state with the API that will be exposed there, it also serves as a test of the API.
ts</li>
</ul>
</li>
</ul>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="typescript" data-theme="github-light github-dark"><code data-language="typescript" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ready_two_groups</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  cy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">movidea</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">m</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make_one_kozane</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      id: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ItemId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      text: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      position: [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TWorldCoord</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    m.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make_items_into_new_group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], { id: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;G1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, text: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;G1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  …</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></figure>
<pre><code>- PS: I decided to put the utility functions in supports because this way the whole test case is imported when importing.
</code></pre>
<p>I have created a test file just to create the initial state.</p>
<ul>
<li>For example, “If you want to check the source code by human manipulation, you can open the file in Cypress and every time you edit the source code, the browser will be reloaded to its initial state, which is convenient.
<ul>
<li>Q: Why human operators?</li>
<li>A: Cypress tests describe “this is how it will behave when this event occurs on this element,” but that does not necessarily mean that the event will occur when a human performs a natural operation
<ul>
<li>Like the “onClick does not occur” I mentioned earlier.</li>
<li>So when I’m making a modification that could break a place like that, I check it by hand and then I test that.</li>
</ul>
</li>
</ul>
</li>
<li>When I was making and going through the tests by trial and error, the files were cluttered and divided.
<ul>
<li><img src="https://gyazo.com/9560742400b55e9ae6f0ba238305afa8/thumb/1000" alt="image"/></li>
<li>It’s because I added a test file saying, “Oh, I have to test this kind of operation from this initial state.</li>
<li>This can be written neatly with preparation and testing separated.
ts</li>
</ul>
</li>
</ul>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="typescript" data-theme="github-light github-dark"><code data-language="typescript" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ready_one_kozane } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./ready_one_kozane&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ready_two_groups } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./ready_two_groups&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">describe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;drag&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  beforeEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">visit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/#blank&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">viewport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;one kozane&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ready_one_kozane</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;two groups&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ready_two_groups</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span></code></pre></figure>
<hr/>
<ul>
<li>The highlighting of nested groups doesn’t seem to be working properly… the dragging itself seems to be working.</li>
<li>I could fix the highlights and test the nested groups.</li>
<li>Next, let’s get the tutorial test running.</li>
<li>The selection was still broken! A tutorial would be helpful to check out all the features in one place (yeah).</li>
<li>Yay, all the tutorial tests passed!</li>
<li>Surprisingly, the major operation of eliminating all Drag and Click event handlers and using the Mouse system for everything took less than two days.</li>
</ul>
<p><img src="https://gyazo.com/83a671a840f1bc35f2c9b7036aca2f43/thumb/1000" alt="image"/>
Oh, no, I thought I was done, but I forgot to comment out the “closed group” drawing.</p>
<ul>
<li>The tutorial doesn’t say how to open and close the group yet.</li>
<li>Fixed.</li>
</ul>
<p><img src="https://gyazo.com/94f546504cc9900a068554c683f1648e/thumb/1000" alt="image"/></p>
<ul>
<li>Solves the problem of not being able to distinguish closed groups from untitled groups with only one kozane in them.</li>
</ul>
<hr/>
<p>functionality you want to add</p>
<ul>
<li>I want to be able to basically Cmd+Enter the OK-like button on the dialog.</li>
<li>REPLACE button in the SPLIT dialog</li>
<li>Create a user page and list of past saves
<ul>
<li>Warn me if I try to close a page I haven’t saved?</li>
</ul>
</li>
<li>The “entire display of content at the point of opening” that was in the Regroup.
<ul>
<li>I had a kozane in an off-center place and said, “What? It’s gone! and you’re like, “Oh!</li>
<li>Spacebar to show the whole view</li>
</ul>
</li>
<li>Zoom to the center of the mouse cursor position</li>
<li>Key bindings and display design can be changed on user pages</li>
<li>Import from Keicho</li>
<li>Import from Scrapbox</li>
<li>Import indented bulleted text as a group</li>
<li>Sharing with narrowed write permissions</li>
</ul>
<p>The one I put on but not yet in the tutorial.</p>
<ul>
<li>Opening and Closing Groups</li>
<li>Give the group a title</li>
<li>Division of stickies
<ul>
<li>I can use it to duplicate and update.</li>
<li>I’d like to see it after Replace is on.</li>
</ul>
</li>
</ul>
<hr/>
<ul>
<li><code>&quot;noUncheckedIndexedAccess&quot;: true,</code>
<ul>
<li>under</li>
<li>If the two-dimensional vector is <code>number[]</code>, there is a possibility that <code>v[0]</code> is undefined, so <code>[number, number]</code> is used.</li>
</ul>
</li>
</ul>
<p>And while we’re at it.</p>
<ul>
<li>
<blockquote>
<p><a href="https://twitter.com/nishio/status/1427279058128146435" class="external">Twitter<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> I thought I could find out the bug of the mistake by separating vectors into “vectors of world coordinate system” and “vectors of screen coordinate system” and distinguishing them by type, but it turned out to be “the bug of converting the difference between two vectors of screen coordinate system (relative vector) into world coordinate system. I thought I could find a bug in which the difference between two vectors in the screen coordinate system (relative vector) is converted to the world coordinate system.</p>
</blockquote>
<ul>
<li>
<blockquote>
<p>In other words, we need 4 vector types: “world absolute”, “world relative”, “screen absolute”, and “screen relative” (wait</p>
</blockquote>
</li>
</ul>
</li>
<li>I actually tried this one (seriously?).</li>
<li>For example, when a kozane in a group is dragged out of the group, its position changes by the amount of the group’s position, but if the position of the object is an absolute coordinate, the absolute coordinates are added to each other.
<ul>
<li>This is because “the position of a kozane in a group is actually not an absolute coordinate but a relative coordinate from the position of the group”, but then position becomes a relative or absolute type, and you cannot specify which one it is without looking at the parent.</li>
</ul>
</li>
<li>The other way is to assume that “the positions of objects that have no parent are relative coordinates from the origin. In this case, the positions of the objects are all relative coordinates, so adding or subtracting relative coordinates… adding the absolute coordinates <code>[0, 0]</code> to the result of the calculation gives the absolute coordinates…
<ul>
<li>If that’s the case, there’s no point in separating the types…</li>
</ul>
</li>
<li>Then the calculation of the center of gravity, a calculation that adds up the N absolute coordinates and divides by N to make it add up. This requires a type that depends on N…</li>
<li>And well, that’s how I got to the halfway point, but I thought that even if I went through with this, it wouldn’t be very effective in avoiding bugs for the increased costs in the future, so I decided to stop.</li>
<li>If you want to tweak the value side, just extend <code>[x, y]</code> to <code>[x, y, 1]</code>. If you take the difference, the third becomes 0 and becomes a relative vector, and adding N and dividing by N can be verified by the fact that the third returns to 1. In the end, any method just adds <code>[0, 0, 1]</code> at the end, so there is no merit in making it more complicated.</li>
</ul>
<hr/>
<ul>
<li>✅Magnification centered on mouse cursor position
<ul>
<li><img src="https://gyazo.com/d051980ddc2d3adbd02f96a93047d25c/thumb/1000" alt="image"/></li>
</ul>
</li>
</ul>
<p>I was thinking about this when I saw [/forum-jp/about this site](<a href="https://scrapbox.io/forum-jp/about" class="external">https://scrapbox.io/forum-jp/about<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> this site), but I’m not sure if it’s a good idea to make it a “request to Kozaneba” or not.</p>
<ul>
<li>If the projects are “better grouped together without subdivisions” and “differentiated by members”, then I feel like there should be one group where you can put an invite link and anyone can enter.</li>
<li>If it’s going to be one, why not include not only Kozaneba, but Keicho and “The Intellectual Production of Engineers” as well?</li>
<li>But then the title of the project would be something like “Request to Nishio”, which is odd.</li>
<li>To be more precise, it could be “Nishio’s requests for intellectual productivity writings and software”, but that’s a long story.</li>
<li>To begin with, “request” is a strong word.
<ul>
<li>But by saying “this is a good place to write your requests,” it may have created an incentive for people with requests to write them.</li>
<li>Some people don’t write “Let’s discuss.”</li>
<li>On the other hand, some people might write a long story about their own theory.</li>
</ul>
</li>
</ul>
<p>next  <a href="./Kozaneba-Development-Diary-2021-08-18" class="internal alias" data-slug="Kozaneba-Development-Diary-2021-08-18">Kozaneba Development Diary 2021-08-18</a></p>
<hr/>
<p>This page is auto-translated from <a href="https://scrapbox.io/nishio/Kozaneba%E9%96%8B%E7%99%BA%E6%97%A5%E8%A8%982021-08-17" class="external">/nishio/Kozaneba開発日記2021-08-17<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> using DeepL. If you looks something interesting but the auto-translated English is not good enough to understand it, feel free to let me know at <a href="https://twitter.com/nishio_en" class="external">@nishio_en<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>. I’m very happy to spread my thought to non-Japanese readers.</p></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false}"></div><button id="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true}"></div></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li><a href="./Kozaneba-Development-Diary-2021-08-16" class="internal">Kozaneba Development Diary 2021-08-16</a></li></ul></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.4.0</a> © 2024</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript">function c(){let t=this.parentElement;t.classList.toggle("is-collapsed");let l=t.classList.contains("is-collapsed")?this.scrollHeight:t.scrollHeight;t.style.maxHeight=l+"px";let o=t,e=t.parentElement;for(;e;){if(!e.classList.contains("callout"))return;let n=e.classList.contains("is-collapsed")?e.scrollHeight:e.scrollHeight+o.scrollHeight;e.style.maxHeight=n+"px",o=e,e=e.parentElement}}function i(){let t=document.getElementsByClassName("callout is-collapsible");for(let s of t){let l=s.firstElementChild;if(l){l.addEventListener("click",c),window.addCleanup(()=>l.removeEventListener("click",c));let e=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=e+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script src="./postscript.js" type="module"></script></html>